<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="~{layout/main :: page(title='Мастерская квестов',
                                           appMain=~{::appMain},
                                           appMainFluid=~{::appMainFluid},
                                           activeMenuItem='workshop')}">



    <appMain>
        <h2 class="mb-4">Мастерская квестов</h2>

        <div class="card">
            <div class="card-body">
                <table id="questsTable" class="display" style="width:100%">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Название</th>
                        <th>Описание</th>
                        <th>Статус</th>
                        <th>Этапов</th>
                    </tr>
                    </thead>
                </table>
            </div>
        </div>
    </appMain>

</th:block>

<script th:inline="javascript">
    $(document).ready(function() {
        // Создаем таблицу
        var table = $('#questsTable').DataTable({
            ajax: {
                url: '/ui/workshop/data',
                dataSrc: ''
            },
            columns: [
                {
                    data: 'id',
                    className: 'text-center'
                },
                {
                    data: 'questName'
                },
                {
                    data: 'description'
                },
                {
                    data: 'new',
                    className: 'text-center',
                    render: function(data) {
                        // data уже будет boolean (true/false)
                        if (data === true) {
                            return '<span class="badge bg-success">Новый</span>';
                        } else {
                            return '<span class="badge bg-secondary">Старый</span>';
                        }
                    }
                },
                {
                    data: 'stageCount',
                    className: 'text-center'
                }
            ],
            // Убираем все лишние настройки для начала
            searching: true,
            ordering: true,
            paging: true
        });
    });
</script>